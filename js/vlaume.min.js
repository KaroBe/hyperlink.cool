"use strict";function getJSON(e){return window.Promise?new Promise(function(t,n){var a=new XMLHttpRequest;a.open("GET",e),a.addEventListener("load",function(){4===a.readyState&&(200===a.status?t(JSON.parse(a.responseText)):n(Error("Error: "+a.status+" "+a.statusText)))}),a.addEventListener("error",function(){n(Error("Error: "+a.status+" "+a.statusText))}),a.send(null)}):void console.log("Your browser does not support promises.")}function init(e,t,n){containerName=t,inputID=n,getJSON(e).then(function(e){listData=e},function(e){console.error(e)})}function recordFilter(){function e(e){if(0===e.length){var t=[];for(var n in listData)t.push(n);return t}var a=[];for(var r in listData)a.push(listData[r]);var s={keys:["abbr","title","keywords","persons","links.title"],id:"key"},i=new Fuse(a,s);return i.search(e)}function t(e){var t=document.getElementById(i);t?t.innerHTML="":(t=document.createElement("ul"),t.id=t.className=i,document.getElementById(containerName).insertBefore(t,null));for(var r=0;r<e.length;r++)t.innerHTML+=n(e[r],listData[e[r]]);t.hasChildNodes()&&a(t.firstElementChild.getElementsByClassName(l)[0])}function n(e,t){var n='<li class="'+o+'" data-key="'+t.key+'"><div class="'+o+'__title">'+t.title+"</div>";if(t.links.length>0){n+='<nav class="nav  record-nav">';for(var a=0;a<t.links.length;a++){var r=t.links[a];n+='<a class="'+o+'__link" href="'+r.url+'">'+r.title+"</a>"}}return n}function a(e){if(e&&e.className.indexOf(l)>-1){var t=document.getElementById(i),n=t.getElementsByClassName(u)[0];n&&n.classList.remove(u),e.className+="  "+u}}function r(e,t){for(;(e=e.parentElement)&&!e.classList.contains(t););return e}function s(){for(var e=document.getElementsByTagName("*"),t=[],n=0;n<e.length;n++)e[n].tabIndex>-1&&null!==e[n].offsetParent&&t.push(e[n]);return t}var i="record-list",o="record",l=o+"__link",u=l+"--active",c=[];for(var d in listData){var m=listData[d];c=c.concat(m.title,m.abbr,m.keywords)}var f=document.getElementById(inputID);f.placeholder=c[Math.floor(Math.random()*c.length)],f.value.length>0&&t(e(f.value));var v=document.getElementById(i);a(v.firstElementChild.getElementsByClassName(l)[0]);var E;f.addEventListener("input",function(n){E&&clearTimeout(E),E=setTimeout(function(){t(e(f.value))},150)},!1),document.addEventListener("focus",function(e){document.activeElement&&a(document.activeElement)},!0),document.addEventListener("keydown",function(e){e=e||window.event;var t=e.keyCode,n=document.getElementById(i);if(-1!==[9,13,37,38,39,40].indexOf(t)&&n.hasChildNodes()){var a=n.getElementsByClassName(u)[0];if(13===t){if(document.activeElement!==document.getElementById(inputID))return;document.activeElement.blur(),a.focus()}var c;if(9===t){if(1===n.length)return;for(var d=s(),m=document.activeElement,f=0;f<d.length;f++)if(d[f]===m){e.shiftKey&&d[f-1]?c=d[f-1]:d[f+1]&&(c=d[f+1]);break}}if([37,39].indexOf(t)>-1){for(var v,E,g=n.getElementsByClassName(l),y=0;y<g.length;y++)if(a===g[y]){v=g[y-1],E=g[y+1];break}if(!v&&!E)return;37===t&&v?c=v:39===t&&E&&(c=E)}else if([38,40].indexOf(t)>-1){var h=r(a,o),p=h.previousElementSibling,N=h.nextElementSibling;if(!p&&!N)return;38===t&&p?c=p.getElementsByClassName(l)[0]:40===t&&N&&(c=N.getElementsByClassName(l)[0])}c&&c.classList.contains(l)&&([37,38,39,40].indexOf(t)>-1&&(e.preventDefault(),c.focus()),a.classList.remove(u),c.className+="  "+u)}})}var listData,containerName,inputID;document.addEventListener("DOMContentLoaded",function(){document.body.classList.contains("js-disabled")&&document.body.classList.remove("js-disabled");var e=function t(){listData?recordFilter():window.setTimeout(t,100)};e()});